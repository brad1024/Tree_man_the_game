<html>
	<head>
		<title>
			Tree_man_the_game

		</title>
		<!-- local file below -->
		<!-- ==================================== -->
		<!--our css file -->
		<link rel='stylesheet' href='Style.css'>

	

		<!-- module below-->
		
		<!-- ==================================== -->
		<!-- jquery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<!-- future socket.io here --> 
		<!--<script src="/socket.io/socket.io.js"></script>-->
		<script src="/socket.io/socket.io.js"></script>
    	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		

		<!-- bootsrap-->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
		<!-- vue.js --> 
	
		
		
		<script src="https://cdn.jsdelivr.net/npm/vue"></script>

		<script type="text/javascript" src="vue.js"></script>


		<!-- ==================================== -->


		<script>
			
			var TURN = 1;  //第一次player_turn 會解鎖 button ，但有兩個人進來都會改
			var PLAYER_ID = 0 ; 
			let socket = io();
			var Env = null;
			var WALL_DIR = "Default";
			var game_start = false ; 


			direct_dic = {
						"E" : "東",
						"S" : "南",
						"W" : "西",
						"N" : "北"
			}
			
			

			
			//message
			var num_message = 0; 
			var MAX_MESSAGE = 19;
			


			
			//信息版
			function addMessage(Text){
				if(num_message>= MAX_MESSAGE){
					$("#message div:nth-child(1)").remove();
				}

				if(num_message %2 ==0){
					$("#message").append("<div class=\"message_div\" style=\"background-color:#F5FFFA;\">"+Text+"</div>");
				} 
				else{
					$("#message").append("<div class=\"message_div\" style=\"background-color:#DCDCDC\">"+Text+"</div>");
				}
				num_message+=1;
			}
			
			//標示
			function Alert(text,title="通知"){
				
				$('#alert_pop').modal('toggle');
				$("#alert_content").html(text);
				$('#alert_title').text(title);
			}

			//戰報
			function combatReportOneline(text){
				text+="<br>"
				$("#combat_report_content").prepend(text);
			}

			function researchReportOneline(text){
				text+="<br>"
				$("#research_report_content").prepend(text);
			}

			//socket區
			//選擇玩家  ==============================================================================
			socket.on("welcome",(player1HasBeenChoosen , player2HasBeenChoosen  )=>{ //when start,hide the main page to let player select charcters.
						// 重新初始化
						PLAYER_ID = 0;	
						$("#message div").remove()
						$("#pl1").attr('disabled',false);
						$("#pl2").attr('disabled',false);
						$("#pl1").show();
						$("#pl2").show();
						$("#pl1").text("帝國之眼");
						$("#pl2").text("帝國賢者");
						$("#pl").text("請選擇角色");

						if(player1HasBeenChoosen){
							$("#pl1").attr('disabled',true);
							$("#pl1").text("player1 has been choosed");
						}
						
						if(player2HasBeenChoosen){
							$("#pl2").attr('disabled',true);
							$("#pl2").text("player2 has been choosed");
						}
						$("#choose_player").show();
						
						// 需要改進??
						$(".LEFT").hide();
						$(".RIGHT").hide();
						$(".alert").hide();
						$("#game_over").hide();
						
				})

			socket.on("player_choosed", (id)=>{ 

						if(id==1){
							
							$("#pl1").attr('disabled',true);
							$("#pl1").text("player2 has been choosed");
							
						}else if(id==-1){
							$("#pl2").attr('disabled',true);
							$("#pl2").text("player2 has been choosed");
							
						}
				})

			socket.on("start_game",()=>{
				
				
				
			
				//基礎設定

				game_start = true;

				if( -1 == PLAYER_ID){
					$(".choice_button").attr('disabled', false);
				}
				
				round = 1;
				$("#choose_player").hide();
				$(".detail_choose").hide();
			
				//放入玩家名
				if(PLAYER_ID == 1){
					$("#player_name").text("上半天");
				}
				else{
					$("#player_name").text("下半天");
				}

				$(".LEFT").show();
				$(".RIGHT").show();
				
				//基礎文本
				$("#start_game_alert").modal("toggle")
				
				
			
			})	
			
			socket.on("player_turn" , ()=>{
				TURN *= -1;
				
			//	console.log(TURN);
			//	console.log(PLAYER_ID)
			// 鎖住行動button
				if(TURN == PLAYER_ID){
					$(".choice_button").attr('disabled', false);
				}
				else{
					$(".choice_button").attr('disabled', true);
				}
				
				$(".detail_choose").hide();
				$("#choose_basic_action").show();

		
	
			})


			// 接受訊息
			socket.on("player_msg" , (msg)=>{
				addMessage(msg);
			})
			//========  ==============================================================================	

			//接收斥侯傳送回來的報告
			
			
			socket.on("scout_report" , (dir , location)=>{
				Title = "偵查報告"
				if (location != -1){
					if(location!=0){
						var msg = "你的斥侯隊告訴你在"+direct_dic[dir]+"方向"+location+"公里處有敵人";
					}
					else{
						var msg = "你的斥侯隊告訴你在"+direct_dic[dir]+"方向的城門下有敵人!";
					}
				}
				else{
					var msg = "此方向尚未發現任何敵人!"
				}

				Alert(text=msg,title=Title);
			})
			
			// ==================

			// 結束一回合要做的事
			socket.on("turn_end", (dice_result)=>{
				// 戰報紀錄加上天數
				combatReportOneline("=======================第"+(Env.round+1)+"天=======================<br>")
				

				//遊戲文本
				var Text = ""
				if(dice_result<=20){

					Text = "城中壓抑的紛圍越來越嚴重<br>你抱著忐忑的心情迎接明天"
					
				}
				else{
					Text="今天似乎又有驚無險的度過了..."
				}
				Text+="<br>趁著空檔帝國後勤隊為你運來了500木頭";
				Alert(text=Text,title="本日觀察")
			})
			//========  ==============================================================================	
			
			socket.on("update_troop_info" , (troop)=>{


			})	
			
			
			// 每一回和更新使用者的狀態

			socket.on("update_state", (env)=>{  //更新狀態
				Env = env;
				
				console.log(env.resource["wood"])
				// 基本數值更新區
				$("#round").text(env.round);
				
				wall_status.update(env.roads);
				
				$("#wood").text(env.resource["wood"]);

				
				
				troop_status.update(env.troops_state);
				
				
			}
			)
			// 戰報通知
			socket.on("combat_report",(report)=>{
				
				if(report.length>0){
					$("#combat_report").empty();
					$("#combat_report").append("<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-bar-chart-line\" viewBox=\"0 0 16 16\">\
								<path d=\"M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z\"/>\
					</svg>")
				}
				for(var i = 0 ; i< report.length ; i++)
				{
					
					combatReportOneline(report[i]);
				}
				

			})

			//研究通知
			socket.on("research_report",(report)=>{
				
				
				//if(report.length>0){
					$("#research_report").empty();
					$("#research_report").append("<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-bar-chart-line\" viewBox=\"0 0 16 16\">\
								<path d=\"M8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z\"/>\
					</svg>")
				//}
				/*
				for(var i = 0 ; i< report.length ; i++)
				{
					
					combatReportOneline(report[i]);
				}
				*/

			})

			// ============================================================================================

			// game over 
			socket.on("gameover", ()=> {
				game_start = false;
				$("#game_over").show();
				$(".LEFT").hide();
				$(".RIGHT").hide();
				$(".alert").hide();
				var Text ="城牆應聲倒下\n 鐵銹味與尖叫聲瞬間充斥城內\n 而帝國的野心大概也會隨之落幕...\n "; 
				Alert(text=Text);
				$("#alert_button").attr('disabled',false);
			})

			

			// jQuery , 按鈕與互動  ========================================================================
			$(document).ready(()=>{
				//初始化tooltip 訊息
				$(function () {
					$('[data-toggle="tooltip"]').tooltip()
					})
				
				
				
				

				$("#go-back ").click(()=>{
					$(".detail_choose").hide();
					$("#choose_basic_action").show();
				})
				//========  ==============================================================================	
				// move troop button =====================================================================
				
				$(".troop_move").click(function(e){
					
					var troop_type = e.target.getAttribute("Type");
					var dir = e.target.getAttribute("dir");
					var Act = e.target.getAttribute("action");
					troop_name = "沒有";
					console.log(troop_type , dir)
					dir_name = "X";
					class move_troop {
						constructor(Act,troop_type,dir){
							this.type = Act;
							this.troop_type = troop_type ;
							this.direction = dir
						}
					}
				
					can_move = true;
					if(troop_type == "archer" && Env.troops_state["archer"].amount > 0   ){
						action = new move_troop(Act,troop_type,dir);
						troop_name= "弓箭";
						dir_name = direct_dic[dir];
						
					}
					else if(troop_type == "armor" && Env.troops_state["armor"].amount > 0   ){
						action = new move_troop(Act,troop_type,dir);
						troop_name="重甲步兵";
						dir_name = direct_dic[dir];
					}
					else if(troop_type == "ranger" && Env.troops_state["ranger"].amount > 0  ){
						action = new move_troop(Act,troop_type,dir);
						troop_name="騎兵";
						dir_name = direct_dic[dir];
					}
					else{
						Alert(text="你沒有可移動的士兵");
						can_move=false;
					}
					
					if(can_move){
						var msg = "你調動了一隊"+troop_name+"隊前往"+dir_name+"方";
						socket.emit("action_done" , PLAYER_ID , action,msg);
					}
					
				})

				//========================================================================================

				//  偵查 button  ================================================================================
				$(".scout_dir ").click(function(e){
					
					var dir = e.target.getAttribute("Dir");;
					class scout {
						constructor(dir){
							this.type ='scout';
							this.scout_dir = dir
						}
					}
					action = new scout(dir);

					var msg = "你派出了斥侯隊前往"+direct_dic[dir]+"方，查看情況...";
					socket.emit("action_done" , PLAYER_ID , action, msg);
					
					


				})
				//      ========================================================================================



				

				//========  ==============================================================================	

				// repair wall button ====================================================================
				$(".repair_wall_dir ").click(function(e){
					
					WALL_DIR = e.target.getAttribute("dir");;
			
					// 計算可以修補的選項
					if( Env.roads[WALL_DIR].wallhp == Env.roads[WALL_DIR].max_wallhp){
						
						Alert(text="此面城牆完好無損，不需要維修!")

					}
					else{
						$('#repair_wall_pop').modal('toggle');
						$("#repair_wall_select").empty()
						console.log(Env.roads[WALL_DIR].max_wallhp )
						for(var i=1; i<= parseInt((Env.roads[WALL_DIR].max_wallhp-Env.roads[WALL_DIR].wallhp)/100) ; i++){
						 	$("#repair_wall_select").append("<option value=\""+i+"\">"+i+"</option>") 
						}
					}


				})
				
				$("#submit_repair_wall").click(()=>{
					
					var repair_value = parseInt(document.getElementById("repair_wall_select").value); //repair value, 是以個位數為單位(要記得*100)
					if (Env.resource["wood"] < repair_value*100){
						Alert(text="你沒有足夠的木頭修城牆");
					}
					else{
						class repair_wall {
							constructor(dir,unit){
								this.type ='repair_wall';
								this.direction =  dir;
								this.unit = unit ;
							}
						}
						
						
						console.log(repair_value);
						action = new repair_wall(WALL_DIR,repair_value);
						var msg = "維修了"+direct_dic[WALL_DIR]+"方牆"+repair_value*100+"點"
						
						socket.emit("action_done" , PLAYER_ID , action,msg);
					}
				})
				
			


				
				//========  ==============================================================================	
				
				// skip  =================================================================================
				$(".research_choose ").click(function(e){
					
					var research_type = e.target.getAttribute("research_type");
					var dir = e.target.getAttribute("dir");;
					var research_name = "沒有";
					class research {
						constructor(research_type="None" , dir="all"){
							this.type ='research';
							this.research_type = research_type;
							this.direction = dir;
						}
					}
					can_research = true;
					// 看條件
					if(research_type == "wall_upgrade" && Env.resource["wood"] >= 1000  ){
						action = new research(research_type,dir);
						research_name= "城牆加固";
						
					}
					else if(research_type == "defence_developments" && Env.resource["wood"] >= 500  ){
						action = new research(research_type);
						research_name="防禦工事";
					}
					else if(research_type == "armor_upgrade" && Env.resource["wood"] >= 2000 ){
						action = new research(research_type);
						research_name="厚木裝甲";
					}
					else{
						Alert(text="木頭不足研究");
						can_research=false;
					}
					
					if(can_research){
						var msg = "你開始研究了"+research_name+"!";
						socket.emit("action_done" , PLAYER_ID , action,msg);
					}
				}


				)
				
				//========  ==============================================================================	 
				
				// skip  =================================================================================
				$("#skip").click(function(e){
					class skip {
						constructor(){
							this.type ='skip';
						}
					}
					action = new skip();
					var msg="你覺得養精蓄銳比較重要，於是這半天休息";
					socket.emit("action_done" , PLAYER_ID , action, msg);
				})
				//========  ==============================================================================	 
				

				//========================show detail state==========================================================
				
				$(".show_state").click(function(event) {     
					$(this).next().toggle();
			    
				});
				
				//========================================================================================

			
				//===================== battle log show =============================================================
				$("#combat_report").click(function(event) {     
					$("#combat_report").empty();
					$("#combat_report").append("<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-bar-chart-line\" viewBox=\"0 0 16 16\">\
							<path d=\"M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z\"/>\
						  </svg>")
					$("#combat_report_pop").modal('toggle');
					
					
					


				});

				$("#research_report").click(function(event) {     
					$("#research_report").empty();
					$("#research_report").append("<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-book\" viewBox=\"0 0 16 16\">\
							<path d=\"M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z\"/>\
						  </svg>")
					$("#research_report_pop").modal('toggle');
					
					
					


				});

				
				//====================================================================================================
				

				//================= restart_game =====================================================================
				$("#restart").click(function() {     

					socket.emit("new_game");
					
				});


				})
		</script>



	</head>
	
	




	<body>
   
	<!-- 選角畫面 ======================          -->
	
	<div id="choose_player">
		<div style="text-align: center">
	<img src="title.PNG" >
			</div>
			
	<div style="text-align: center">
		<p id="pl">請選擇角色</p>
		<button v-on:click="Click($event)"  class="btn btn-info" id="pl1" value=1>帝國之眼</button>
		  <button  v-on:click="Click($event)" class="btn btn-info" id="pl2" value=-1>帝國賢者</button>
		</div>
	


	
	</div>
	<!-- ======================================  -->


	<!-- 結束畫面 ======================          -->
	<div id="game_over">
		<div style="text-align: center">
		<img src="gameover.PNG" >
		</div>	
		<div style="text-align: center">
		<button class="btn btn-info" id="restart">重新開始</button>
		</div>
		
	</div>
		<!-- ======================================  -->
	
	
	<!-- alert  -->
	

	


	<div class="LEFT" >
	



    <!-- our status showing below-->
	<!-- ==================================== -->
	<div  class="LEFT_TOP">
		<!--屬性欄，此div為最外框-->
    	<div id="status" > <div>當前狀態 <span id="player_name"> </span> </div>   
			<div id="my_basic-data">
				<!--基本數值-->
				<div>你堅守了<span id="round"> 1 </span>天</div>
				<div id="resource_state">  內政狀態
					<button class="show_state">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
						<path d="M8 .95 14.61 4h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.379l.5 2A.5.5 0 0 1 15.5 17H.5a.5.5 0 0 1-.485-.621l.5-2A.5.5 0 0 1 1 14V7H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 4h.89L8 .95zM3.776 4h8.447L8 2.05 3.776 4zM2 7v7h1V7H2zm2 0v7h2.5V7H4zm3.5 0v7h1V7h-1zm2 0v7H12V7H9.5zM13 7v7h1V7h-1zm2-1V5H1v1h14zm-.39 9H1.39l-.25 1h13.72l-.25-1z"/>
					  </svg>
					</button>
				
				<div>
				
						<div>木頭: 
						<span id="wood">500 </span> </div>

						<br>
				</div>
			   </div>
			    <!-- 城牆區 ========================  -->
				<div id="wall_state"  > 城牆狀態 
					<button class="show_state">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bricks" viewBox="0 0 16 16">
							<path d="M0 .5A.5.5 0 0 1 .5 0h15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5H2v-2H.5a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 .5 6H2V4H.5a.5.5 0 0 1-.5-.5v-3zM3 4v2h4.5V4H3zm5.5 0v2H13V4H8.5zM3 10v2h4.5v-2H3zm5.5 0v2H13v-2H8.5zM1 1v2h3.5V1H1zm4.5 0v2h5V1h-5zm6 0v2H15V1h-3.5zM1 7v2h3.5V7H1zm4.5 0v2h5V7h-5zm6 0v2H15V7h-3.5zM1 13v2h3.5v-2H1zm4.5 0v2h5v-2h-5zm6 0v2H15v-2h-3.5z"/>
						  </svg>
					</button>

				<div >
					<div v-for="(wall, dir) in walls"> 
					<div>{{wall.dir}}: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-bar-right" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M6 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L12.293 7.5H6.5A.5.5 0 0 0 6 8zm-2.5 7a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5z"/>
					  </svg>  
					<span > {{wall.hp}} </span> 
				
					</div>
					
					<div class="progress">
						<div  class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0"
						aria-valuemin="0" aria-valuemax="100" :style="{width: wall.progress + '%'}">
						{{wall.progress }}%
						</div>
					</div>
					

		    
				

					</div>
				</div>
				
				</div>
				 <!-- 城牆區 above ========================  -->
				<br>

				<div id="troop_state">軍隊狀態
					<button class="show_state">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people" viewBox="0 0 16 16">
							<path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
						  </svg>
					</button>
				
				<div >
					<div v-for="(troop,name) in troops" v-if="troop.valid">{{troop.name}}隊:    <span > {{troop.num}} </span>    隊         </div>
				</div>

				</div>
				<br>
				<div>交戰記錄
					<button id="combat_report">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-line" viewBox="0 0 16 16">
							<path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z"/>
						  </svg>
					</button>
				</div>
				<br>
				<div>研發記錄
					<button id="research_report">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-book" viewBox="0 0 16 16">
							<path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
						  </svg>
					</button>
				</div>












			</div>		

        </div> <!-- id=LEFT_TOP closing tag , this section ending here-->

	<!-- all status showing above-->
	<!-- ==================================== -->

	
	
        </div><!-- id=status closing tag , this section ending here-->
	<!-- all status showing above-->
	<!-- ==================================== -->


	

	<!-- all buttons or something user interaction below-->
	<!-- ==================================== -->
	<div class="LEFT_BOTTOM " style="overflow:scroll">
		
			<div id="my_mission">操作</div>
			





			<!--  基本操作  -->
			<div id = "choose_basic_action">
			你這回合選擇
			<!-- Vue : choose_basic-->
			<div v-for="content in contents">
			
			<button class="choice_button btn btn-dark"   v-bind:id="content[0]" v-on:click="choose_action">{{content[1]}}</button>
			</div>
		
		    </div>
     

			<!--  偵查  -->
			<div class= "detail_choose dir_btn"   id = "scout" > 
				<div>選擇偵查方向  </div>  
				<!-- Vue : button-direction  記得改class、屬性  記得上位div class要加 dir_btn-->
				<button-direction v-bind:item="direction" v-for="direction in directions" class="scout_dir "></button-direction>

			</div>
			<!--   =======================================   -->		

		
		
			
			
		

			<!--  移動士兵-->
			<div class= "detail_choose" id = "move_troop"> 

				<label>{{type_name}}</label>
                <input type="range" class="custom-range" min="1" max="2" id="customRange2" @change="updateRangeValue($event)">
				<div v-if="type==1">
				<div>選擇派出兵種  </div>  
				<div style="width:100% ; height:20%" v-for="troop in troops"> 
				<div>
				{{troop[2]}}隊
				<br>
				<div class="float"  style="width:5% ; height:30%"    v-for="direction in directions" > 
					
					<button  type="button" class="btn btn-success  troop_move" :dir="direction[0]"  :Type="troop[1]" action="move_army"  >{{direction[1]}}</button>   
					
				</div>
				</div>
				
				</div>
				</div>
				
				<div v-if="type==2">
				<div>選擇撤退兵種  </div>  
				<div style="width:100% ; height:20%" v-for="troop in troops"> 
				<div>
				{{troop[2]}}隊
				<br>
				<div class="float"  style="width:5% ; height:30%"    v-for="direction in directions" > 
					
					<button  type="button" class="btn btn-success  troop_move" :dir="direction[0]"  :Type="troop[1]" action="retreat"  >{{direction[1]}}</button>   
					
				</div>
				</div>
				
				</div>
		
				</div>

			</div>
			


			<!--   =======================================   -->



			<!--  招募士兵  -->
			<div class= "detail_choose" id = "recruit_troop" > 
				<div>選擇招募兵種  </div>  
				
				<div v-for="troop in troops">
				<div  > 
				<button  type="button" class="btn btn-danger recruit_troop" data-toggle="tooltip" data-placement="right" data-html="true" :title="description(troop[0])"   :id="troop[1]" v-on:click="Click" >{{troop[2]}}隊</button>   
					   
				</div>
				<br>
				</div>
				


			</div>
		
			
			
			
			<!--   =======================================   -->			
			
			<!--   修城牆  -->
			<div class= "detail_choose dir_btn" id = "repair_wall" >  
				<div >選擇修補方向  </div>  
				<!-- Vue : button-direction  記得改class、屬性  記得上位div class要加 dir_btn-->
				<button-direction v-bind:item="direction" v-for="direction in directions"  class="repair_wall_dir"></button-direction>
				




				<!---  這是一個彈出視窗，可以選擇城牆數量-->
				<div class="modal" id="repair_wall_pop" tabindex="-1" role="dialog">
					<div class="modal-dialog" role="document">
					  <div class="modal-content">
						<div class="modal-header">
						  <h5 class="modal-title">建築工向你報告</h5>
						  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						  </button>
						</div>
						<div class="modal-body">
							<!-- 這是一個選擇條-->
							<div class="form-group">
								<label for="exampleFormControlSelect1">選擇城牆修築數量</label>
								<select class="form-control" id="repair_wall_select">
								  <!--按下 按鈕會由jQuery 生成合法選項-->
								</select>
							  </div>
						</div>
						<div class="modal-footer">
						  <button type="button" class="btn btn-primary" data-dismiss="modal" id="submit_repair_wall">送出並結束回合</button>
						  <button type="button" class="btn btn-secondary" data-dismiss="modal" >返回</button>
						</div>
					  </div>
					</div>
				  </div>
				<!-- end of pop window-->
				


			</div>
			<!--   =======================================   -->		

			<!--   研究  -->
			<div class= "detail_choose" id="research">
			
			<div style=" height:20%;"  v-for="r in researchs"  >
				<div  v-if="r[3]==false" > 
				{{r[2]}}
				<br>
				<button  type="button" class="btn btn-success  research_choose" data-toggle="tooltip" data-placement="right" data-html="true" title="研究"   :research_type="r[1]" dir="all"  >{{Name(r[1],"all")}}</button>   
						   
				</div>

				<div  v-else  >
				{{r[2]}}
				<br>
				<div class="float" v-for="direction in directions">
				{{direction[1]}}
				<button  type="button" class="btn btn-success research_choose" data-toggle="tooltip" data-placement="right" data-html="true" title="研究"   :research_type="r[1]"  :dir=direction[0] >{{Name(r[1],direction[0])}}</button>  
				</div> 
				</div>
				
			</div>
			</div>
			<!--   =======================================   -->	




			<!--   外出  -->
			<div class= "detail_choose" id="go_out">
			
				<div >
					Bye
				</div>
			</div>
			<!--   =======================================   -->	







			

			<button class="detail_choose" , id="go-back"> 返回</button>
			<!--   =======================================   -->
			


		</div>
	</div>

	</div>
	<div class="RIGHT">
	<!-- show message below--> 
			<!-- ==================================== -->
			
			<div id="message">message
		

			</div>
			
			
			<!-- show message above--> 
			<!-- ==================================== -->

		
			
			

	</div> 


		<!---  這是一個彈出視窗，用來警告-->
	
		
			<div class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" id="alert_pop">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="alert_title">Alert</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body" id="alert_content">
							...
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal" id="alert_button">OK</button>
		
					</div>
					</div>
				</div>
				</div>	

		<!-- ======================================  -->

	<!--文本跳出視窗-->
	<div class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" id="start_game_alert">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Story</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				"森林之母已怒不可遏，樹木之罰將降於貪婪之人"<br>
				神木教教徒今天也如是說道<br>
				就在你不以為然的同時<br>
				城外遠處的森林傳來了數聲巨響<br>
				接著是護城弓箭隊的回報<br>
				仿佛傳說中遠古巨人般的<br>
				眾多樹型妖怪正在逼近你的城市.....<br>
				你必須當機立斷的竭全城之力才有可能活下去!<br>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal" id="start_game_alert_ok">Game Start</button>

			</div>
			</div>
		</div>
		</div>	
		<!-- ======================================  -->

		<!-- 戰報跳出視窗-->

		<div class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" id="combat_report_pop">
			<div class="modal-dialog modal-dialog-scrollable" role="document">
				<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" >交戰記錄</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="combat_report_content" style="overflow:scroll;">
					=======================第1天=======================<br>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="combat_report_ok">OK</button>
	
				</div>
				</div>
			</div>
			</div>	

		<!-- ======================================  -->

		<!-- 研究跳出視窗-->

		<div class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" id="research_report_pop">
			<div class="modal-dialog modal-dialog-scrollable" role="document">
				<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" >研究報告</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="research_report_content" style="overflow:scroll;">
					
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="research_report_ok">OK</button>
	
				</div>
				</div>
			</div>
			</div>	

		<!-- ======================================  -->
</body>

<script src="vue.js"></script>
</html>