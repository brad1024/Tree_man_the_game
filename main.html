<html>
	<head>
		<title>
			Tree_man_the_game

		</title>
		<!-- local file below -->
		<!-- ==================================== -->
		<!--our css file -->
		<link rel='stylesheet' href='Style.css'>

	

		<!-- module below-->
		<!-- ==================================== -->
		<!-- jquery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<!-- future socket.io here --> 
		<!--<script src="/socket.io/socket.io.js"></script>-->
		<script src="/socket.io/socket.io.js"></script>
    	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

		<!-- ==================================== -->


		<script>

			let socket = io();


			//message
			var num_message = 0; 
			var MAX_MESSAGE = 19; 
			function addMessage(Text){
				if(num_message>= MAX_MESSAGE){
					$("#message div:nth-child(1)").remove();
				}

				if(num_message %2 ==0){
					$("#message").append("<div class=\"message_div\" style=\"background-color:#F5FFFA;\">"+Text+"</div>");
				} 
				else{
					$("#message").append("<div class=\"message_div\" style=\"background-color:#DCDCDC\">"+Text+"</div>");
				}
				num_message+=1;
			}
			
			//選擇玩家 socket  ==============================================================================
			socket.on("welcome",()=>{ //when start,hide the main page to let player select charcters.
						$(".LEFT").hide();
						$(".RIGHT").hide();
				})

			socket.on("player_choosed", (id)=>{ 
						if(id==1){
							$("#pl1").hide();
						}else if(id==2){
							$("#pl2").hide();
						}
				})

			socket.on("start_game",()=>{
				
				round = 1;
				$("#choose_player").hide();
				$(".LEFT").show();
				$(".RIGHT").show();
				/*
				$("#my_item_2").hide();
				$("#my_item_content_2").hide();
				$("#item_sub_accept_1").hide();
				$("#item_sub_accept_2").hide();
				$("#item_sub_deny").hide();
				$("#action_pray").hide(); */
			})	

			
			//========  ==============================================================================	

			socket.on("update_state", (env)=>{  //更新雙方血量
				$("#round").text(env.round);
				$("#east_hp").text(env.roads["E"].wallhp);
				$("#south_hp").text(env.roads["S"].wallhp);
				$("#west_hp").text(env.roads["W"].wallhp);
				$("#north_hp").text(env.roads["N"].wallhp);
			}
			)

			// jQuery , 按鈕與互動
			$(document).ready(()=>{
				//選擇玩家 按鈕 ========================
				$("#pl1").click(()=>{
					playerId = 1;
					$("#pl1").hide();
					$("#pl2").hide();
					$("#pl").text("你是玩家1");
					socket.emit("choose_character", 1);
				});
				$("#pl2").click(()=>{
					playerId = 2;
					$("#pl1").hide();
					$("#pl2").hide();
					$("#pl").text("你是玩家2");
					socket.emit("choose_character", 2);
				});
				//========  ==============================================================================	
			
			})
		</script>



	</head>
	
	




	<body>
   
	<!-- 選角畫面 -->
	<div id="choose_player">
	<img src="title.PNG" >
	<div style="text-align: center">
		<p id="pl">請選擇角色</p>
		<button id="pl1">player1</button>
		  <button id="pl2">player2</button>
		</div>
	</div>




	<div class="LEFT">
	
	

    <!-- our status showing below-->
	<!-- ==================================== -->
	<div class="LEFT_TOP">
		<!--屬性欄，此div為最外框-->
    	<div id="status" >當前狀態 
			<div id="my_basic-data">
				<!--基本數值-->
				<div>你堅守了<span id="round"> 1 </span>天</div>
				<div> 城牆狀態</div>
				<div>東: <span id="east_hp"> 1000</span> </div>
				<div>南: <span id="south_hp"> 1000 </span> </div>
				<div>西: <span id="west_hp"> 1000 </span> </div>
				<div>北: <span id="north_hp"> 1000 </span> </div>
				<div>軍隊狀態</div>
				<div>弓箭隊:    <span id="archer"> 1 </span>    隊         </div>
				<div>重步兵隊:    <span id="armor"> 0 </span>   隊          </div>
				<div>騎兵隊:    <span id="ranger"> 0 </span>    隊         </div>
			</div>		

        </div> <!-- id=LEFT_TOP closing tag , this section ending here-->

	<!-- all status showing above-->
	<!-- ==================================== -->

	
	
        </div><!-- id=status closing tag , this section ending here-->
	<!-- all status showing above-->
	<!-- ==================================== -->




	<!-- all buttons or something user interaction below-->
	<!-- ==================================== -->
	<div class="LEFT_BOTTOM">
		
			<div id="my_mission">操作</div>
			
			<div id = "choose_action">
			你這回合選擇

			<button class="choice_button" id="choose_left">軍隊調度</button>
			<button class="choice_button" id="choose_left">招募士兵</button>
			<button class="choice_button" id="choose_left">修築城牆</button>

		    </div>

	</div>

	</div>
	<div class="RIGHT">
	<!-- show message below--> 
			<!-- ==================================== -->
			
			<div id="message">message
		

			</div>
			
			
			<!-- show message above--> 
			<!-- ==================================== -->

	</div> 



</body>


</html>
